# CBC-Agent Environment Variables for Cloud Deployment
# Copy this to .env.local and fill in your values

# ========================================
# CORE LLM CONFIGURATION (REQUIRED)
# ========================================

# Primary LLM Provider (Anthropic) - REQUIRED for all deployments
ANTHROPIC_API_KEY=your_anthropic_key_here
CLAUDE_API_MODEL=claude-sonnet-4-20250514

# Fallback LLM Provider (OpenAI) - OPTIONAL but recommended
OPENAI_API_KEY=your_openai_key_here
OPENAI_FALLBACK_MODEL=gpt-4o-mini

# LLM Provider Configuration
PRIMARY_PROVIDER=anthropic
FALLBACK_PROVIDER=openai
FALLBACK_ENABLED=true

# ========================================
# FEATURE FLAGS (All default to false)
# ========================================

# Email notifications for intake submissions
FEATURE_EMAIL_NOTIFICATIONS=false

# Calendar and knowledge base content ingestion
FEATURE_CALENDAR_INGEST=false

# Enhanced analytics with external providers
FEATURE_ANALYTICS=false

# ========================================
# EMAIL NOTIFICATIONS (Optional)
# ========================================

# Email provider: sendgrid|smtp|mailgun
EMAIL_PROVIDER=smtp

# Email configuration
EMAIL_FROM="Coral Beach Reception <reception@coralbeach.bm>"
RECEPTION_EMAILS="reception@coralbeach.bm,concierge@coralbeach.bm"
EMAIL_BCC=""
EMAIL_SUBJECT_PREFIX="[CBC Concierge] "
EMAIL_SEND_GUEST_COPY=false

# Staging safety - set to true to log emails without sending
EMAIL_DRY_RUN=true

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_SECURE=false

# SendGrid Configuration
SENDGRID_API_KEY=your_sendgrid_api_key

# Mailgun Configuration  
MAILGUN_API_KEY=your_mailgun_api_key
MAILGUN_DOMAIN=your_mailgun_domain

# ========================================
# CALENDAR & KNOWLEDGE BASE INGEST
# ========================================

# Calendar ingestion mode: email|manual (start with manual)
CALENDAR_INGEST_MODE=manual

# Allowed email senders for calendar updates (future use)
CALENDAR_INGEST_ALLOWED_SENDERS="secretary@coralbeach.bm"

# File paths and backup directories
CALENDAR_BACKUP_DIR="server/data/calendar"
KB_PATH="data/cbc_knowledge.md"
KB_BACKUP_DIR="server/data/kb_backups"

# ========================================
# ANALYTICS CONFIGURATION
# ========================================

# Analytics provider: none|plausible|posthog|rudderstack
ANALYTICS_PROVIDER=none

# Provider-specific configuration
ANALYTICS_DSN=your_analytics_dsn_here

# Privacy controls
ANALYTICS_PII_REDACTION=true

# Plausible configuration (if using)
PLAUSIBLE_DOMAIN=your_domain.com
PLAUSIBLE_API_KEY=your_plausible_api_key

# PostHog configuration (if using)
POSTHOG_API_KEY=your_posthog_api_key
POSTHOG_HOST=https://app.posthog.com

# ========================================
# EXISTING CONFIGURATION
# ========================================

# Rate limiting
RATE_LIMIT_MAX=10
RATE_LIMIT_WINDOW=60000

# Weather Service Configuration
WEATHER_PROVIDER=openmeteo
WEATHER_FALLBACK_PROVIDER=openmeteo

# WeatherKit Configuration (Apple Developer Account Required)
WEATHERKIT_TEAM_ID=your_team_id
WEATHERKIT_KEY_ID=your_key_id  
WEATHERKIT_BUNDLE_ID=bm.cbc.agent
WEATHERKIT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
your_private_key_content_here
-----END PRIVATE KEY-----"

# OpenWeather Configuration
OPENWEATHER_API_KEY=your_openweather_api_key
WEATHER_API_KEY=your_openweather_api_key

# Reservation Intake Configuration
FRONT_DESK_EMAIL=frontdesk@coralbeach.bm
ADMIN_DASH_PASSWORD=your_secure_admin_password
DATA_INTAKE_DIR=./data/intake/reservations
IP_HASH_SALT=your_secure_salt_here

# FAQ System Configuration
FAQ_ENABLED=true
FAQ_MIN_SCORE=0.60
FAQ_RETURN_TOP=1
FAQ_SHOW_BADGE=false
FAQ_SCORE_THRESHOLD=0.68
FAQ_LOW_THRESHOLD=0.50
FAQ_ENABLE_LOGGING=true
ANALYTICS_DIR=server/data/analytics

# Application Configuration
NEXT_PUBLIC_URL=https://your-domain.vercel.app
NODE_ENV=production

# ========================================
# DEPLOYMENT NOTES
# ========================================

# For Vercel deployment:
# 1. Set ANTHROPIC_API_KEY in Vercel dashboard
# 2. Enable desired feature flags
# 3. Configure email provider if notifications enabled
# 4. Set NEXT_PUBLIC_URL to your Vercel domain

# For staging:
# 1. Set EMAIL_DRY_RUN=true
# 2. Use test API keys where possible
# 3. Enable features gradually for testing

# For production:
# 1. Set EMAIL_DRY_RUN=false
# 2. Use production API keys
# 3. Enable analytics and monitoring