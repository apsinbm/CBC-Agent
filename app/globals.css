@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import mobile and cross-browser optimizations */
@import './mobile-optimizations.css';

@layer base {
  html {
    @apply scroll-smooth;
    /* Prevent zoom on iOS double tap */
    touch-action: manipulation;
  }
  
  body {
    @apply bg-neutral-50 text-neutral-900;
    /* Prevent overscroll bounce on iOS */
    overscroll-behavior: none;
  }
  
  /* Allow text selection in chat messages and content */
  .message-content, .chat-message, p, span, div {
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
  
  /* Enable text selection for input areas */
  input, textarea, [contenteditable] {
    -webkit-user-select: auto;
    -khtml-user-select: auto;
    -moz-user-select: auto;
    -ms-user-select: auto;
    user-select: auto;
  }
  
  /* Disable selection only for UI elements */
  button, .button, nav, .modal-backdrop {
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
}

/* Hide Next.js Static Route Badge and Development Indicators - Comprehensive removal */
[data-nextjs-route-announcer],
[data-nextjs-static-indicator],
[data-nextjs-build-indicator],
[data-nextjs-dev-indicator],
[data-nextjs-router-indicator],
[data-nextjs-route-indicator],
[data-nextjs-isr-indicator],
[aria-live="assertive"],
div[style*="bottom:1rem"][style*="left:1rem"],
div[style*="bottom: 1rem"][style*="left: 1rem"],
div[style*="bottom:16px"][style*="left:16px"],
div[style*="bottom: 16px"][style*="left: 16px"],
.__next-route-announcer__,
.__next-build-indicator__,
.__next-dev-indicator__,
.__next-router-indicator__,
/* Target the specific badge with lightning icon */
div:has(svg[viewBox="0 0 24 24"]):has(path[d*="M13 2L3 14h9l-1 8 10-12h-9l1-8z"]),
/* Target Next.js 15 specific indicators */
div[data-nextjs-toast],
div[class*="__next-build"],
div[class*="__next-dev"],
div[class*="__next-router"],
div[class*="__next-static"],
/* Target any element containing "Static route" text */
div:has-text("Static route"),
*:has-text("Static route"),
/* Target floating badges in bottom-left corner */
div[style*="position: fixed"][style*="bottom"][style*="left"][style*="z-index"],
div[style*="position:fixed"][style*="bottom"][style*="left"][style*="z-index"],
/* Target elements with specific positioning values */
div[style*="bottom: 20px"][style*="left: 20px"],
div[style*="bottom: 24px"][style*="left: 24px"],
/* Additional Next.js 15+ selectors */
[id*="__next-route-indicator"],
[id*="__next-static-indicator"],
.nextjs-portal,
.nextjs-toast-errors,
.nextjs-toast-errors-parent {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  width: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}

/* FAQ Search Input Specific Styling - High specificity to override other rules */
.faq-search-input {
  background-color: rgba(255, 255, 255, 0.2) !important;
  color: white !important;
  caret-color: white !important;
  -webkit-text-fill-color: white !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.faq-search-input::placeholder {
  color: rgba(255, 255, 255, 0.7) !important;
  -webkit-text-fill-color: rgba(255, 255, 255, 0.7) !important;
  opacity: 1 !important;
}

.faq-search-input:focus {
  background-color: rgba(255, 255, 255, 0.25) !important;
  color: white !important;
  caret-color: white !important;
  -webkit-text-fill-color: white !important;
  border: 1px solid rgba(255, 255, 255, 0.5) !important;
  outline: 2px solid rgba(255, 255, 255, 0.3) !important;
  outline-offset: 0px;
}

/* Override autofill for FAQ search */
.faq-search-input:-webkit-autofill,
.faq-search-input:-webkit-autofill:hover,
.faq-search-input:-webkit-autofill:focus,
.faq-search-input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px rgba(255, 255, 255, 0.2) inset !important;
  -webkit-text-fill-color: white !important;
  background-color: transparent !important;
  color: white !important;
}

/* ===== FORCE LIGHT THEME FOR ALL INPUTS ===== */
/* Single source of truth for input theming - prevents dark mode interference */
@layer base {
  /* Global input reset - force light theme */
  input:not(.faq-search-input),
  textarea:not(.faq-search-input),
  select:not(.faq-search-input),
  [type="text"],
  [type="email"],
  [type="tel"],
  [type="number"],
  [type="date"],
  [type="time"],
  [type="search"],
  [type="url"],
  [type="password"] {
    background-color: white !important;
    color: black !important;
    -webkit-text-fill-color: black !important;
    -webkit-background-clip: padding-box !important;
  }
  
  /* Placeholder styling */
  input:not(.faq-search-input)::placeholder,
  textarea:not(.faq-search-input)::placeholder {
    color: #6b7280 !important; /* gray-500 */
    -webkit-text-fill-color: #6b7280 !important;
    opacity: 1 !important;
  }
  
  /* Focus state */
  input:not(.faq-search-input):focus,
  textarea:not(.faq-search-input):focus,
  select:not(.faq-search-input):focus {
    background-color: white !important;
    color: black !important;
    -webkit-text-fill-color: black !important;
  }
  
  /* Disabled state */
  input:not(.faq-search-input):disabled,
  textarea:not(.faq-search-input):disabled,
  select:not(.faq-search-input):disabled {
    background-color: #f9fafb !important; /* gray-50 */
    color: #6b7280 !important; /* gray-500 */
    -webkit-text-fill-color: #6b7280 !important;
    opacity: 1 !important;
  }
  
  /* Autofill override - exclude FAQ search */
  input:not(.faq-search-input):-webkit-autofill,
  input:not(.faq-search-input):-webkit-autofill:hover,
  input:not(.faq-search-input):-webkit-autofill:focus,
  input:not(.faq-search-input):-webkit-autofill:active,
  textarea:-webkit-autofill,
  select:-webkit-autofill {
    -webkit-box-shadow: 0 0 0 1000px white inset !important;
    -webkit-text-fill-color: black !important;
    background-color: white !important;
    transition: background-color 5000s ease-in-out 0s;
  }
  
  /* Date/time picker overrides */
  input[type="date"]::-webkit-calendar-picker-indicator,
  input[type="time"]::-webkit-calendar-picker-indicator {
    filter: invert(0) !important;
    opacity: 0.6;
  }
  
  /* Select dropdown arrow */
  select:not(.faq-search-input) {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E") !important;
    background-position: right 0.5rem center !important;
    background-repeat: no-repeat !important;
    background-size: 1.5em 1.5em !important;
    padding-right: 2.5rem !important;
  }
  
  /* Prevent dark mode color scheme - exclude FAQ search */
  input:not(.faq-search-input), 
  textarea:not(.faq-search-input), 
  select:not(.faq-search-input) {
    color-scheme: light !important;
  }
  
  /* FAQ search needs its own color scheme */
  .faq-search-input {
    color-scheme: dark !important;
  }
  
  /* Override any Tailwind dark: modifiers */
  @media (prefers-color-scheme: dark) {
    input:not(.faq-search-input),
    textarea:not(.faq-search-input),
    select:not(.faq-search-input) {
      background-color: white !important;
      color: black !important;
      -webkit-text-fill-color: black !important;
    }
  }
}

@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-neutral-100 rounded-full;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-neutral-400 rounded-full hover:bg-neutral-500;
  }
  
  /* Mobile-specific utilities */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Safari-specific fixes */
  .webkit-appearance-none {
    -webkit-appearance: none;
  }
  
  /* Prevent iOS zoom on input focus */
  .no-zoom {
    font-size: 16px !important;
  }
  
  /* Mobile-friendly tap target sizes */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Hide scrollbar on mobile for cleaner look */
  @media (max-width: 640px) {
    .hide-scrollbar-mobile {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .hide-scrollbar-mobile::-webkit-scrollbar {
      display: none;
    }
  }
}